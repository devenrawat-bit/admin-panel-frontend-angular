<div class="cms-container">
  <h2>{{ mode === 'add' ? 'Add CMS' : 'Edit CMS' }}</h2>

  <!-- Success Message -->
  <div class="alert alert-success" *ngIf="successMessage">
    <i class="fa-solid fa-circle-check"></i>
    {{ successMessage }}
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()">

    <!-- KEY -->
    <div class="form-group">
      <label>
        Key<span class="required">*</span>
        <span class="char-count">{{ getCharacterCount('key') }}</span>
      </label>
      <input
        type="text"
        formControlName="key"
        placeholder="Enter unique key (e.g., about-us)"
        maxlength="50"
        class="form-control"
        (input)="onKeyInput()"
        (blur)="onKeyBlur()"
        [class.is-invalid]="hasError('key')"
      />
      <div class="error" *ngIf="hasError('key')">
        {{ getErrorMessage('key') }}
      </div>
    </div>

    <!-- TITLE -->
    <div class="form-group">
      <label>
        Title<span class="required">*</span>
        <span class="char-count">{{ getCharacterCount('title') }}</span>
      </label>
      <input
        type="text"
        formControlName="title"
        placeholder="Enter page title (3-100 characters)"
        maxlength="100"
        class="form-control"
        (input)="onTitleInput()"
        (blur)="onTitleBlur()"
        [class.is-invalid]="hasError('title')"
      />
      <div class="error" *ngIf="hasError('title')">
        {{ getErrorMessage('title') }}
      </div>
    </div>

    <!-- META KEYWORD -->
    <div class="form-group">
      <label>
        Meta Keyword<span class="required">*</span>
        <span class="char-count">{{ getCharacterCount('metaKeyword') }}</span>
      </label>
      <input
        type="text"
        formControlName="metaKeyword"
        placeholder="Enter meta keywords (max 200 characters)"
        maxlength="200"
        class="form-control"
        (input)="onMetaKeywordBlur()"
        (blur)="onMetaKeywordBlur()"
        [class.is-invalid]="hasError('metaKeyword')"
      />
      <div class="error" *ngIf="hasError('metaKeyword')">
        {{ getErrorMessage('metaKeyword') }}
      </div>
    </div>

    <!-- STATUS -->
    <div class="form-group">
      <label>Status*</label>
      <select formControlName="isActive" class="form-control">
        <option [value]="true">Active</option>
        <option [value]="false">Inactive</option>
      </select>
    </div>

    <!-- CONTENT (CKEditor) -->
    <div class="form-group">
      <label>Content<span class="required">*</span></label>

      <ckeditor
        [editor]="Editor"
        [config]="editorConfig"
        formControlName="content"
        (ready)="onEditorReady($event)"
        (blur)="onContentBlur()"
      ></ckeditor>

      <div class="error" *ngIf="hasError('content')">
        {{ getErrorMessage('content') }}
      </div>
    </div>

    <!-- ACTION BUTTONS -->
    <div class="btn-row">
      <button type="button" class="btn btn-secondary" (click)="cancel()">
        Cancel
      </button>

      <button type="submit" class="btn btn-primary" [disabled]="saving">
        {{ saving ? 'Saving...' : mode === 'add' ? 'Create' : 'Update' }}
      </button>
    </div>
  </form>
</div>
